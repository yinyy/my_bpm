<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <title>签到坐标</title>
    <style type="text/css">
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }

        #container {
            height: 100%;
        }
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.5&ak=FBddae84e942f0b6b28aa762786b00f8">
    //v1.5版本的引用方式：src="http://api.map.baidu.com/api?v=1.5&ak=您的密钥"
    //v1.4版本及以前版本的引用方式：src="http://api.map.baidu.com/api?v=1.4&key=您的密钥&callback=initialize"
    </script>
    <script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/demo/convertor.js"></script>
</head>

<body>
    <div id="container"></div>
    <script type="text/javascript">
        alert('adfadadsfadsf');

        function convertGpgga(v) {
            var a = parseInt(v);
            var b = (v - a) * 100.0 / 60.0;

            return a + b;
        }

        var query = window.location.search.substring(1);
        var qs = query.split('&');
        var obj = {};
        for (var i=0;i<qs.length;i++) {
            var p = qs[i];
            obj[p.substring(0, p.indexOf('='))] = p.substring(p.indexOf('=') + 1);
        }
      
        var xx =convertGpgga( obj.lng);
        var yy =convertGpgga( obj.lat);
        var gpsPoint = new BMap.Point(xx, yy);

        var map = new BMap.Map("container");          // 创建地图实例
        //var point = new BMap.Point(116.404, 39.915);  // 创建点坐标
        //map.centerAndZoom("东营市", 12);                 // 初始化地图，设置中心点坐标和地图级别
        map.addControl(new BMap.NavigationControl());
        map.enableScrollWheelZoom(true);

        translateCallback = function (point) {
            var marker = new BMap.Marker(point);
            map.addOverlay(marker);
            var label = new BMap.Label("签到地点", { offset: new BMap.Size(20, -10) });
            marker.setLabel(label); //添加百度label
            map.centerAndZoom(point, 15);
            //alert(point.lng + "," + point.lat);
        }
        setTimeout(function () {
            BMap.Convertor.translate(gpsPoint, 0, translateCallback);     //真实经纬度转成百度坐标
        }, 50);

        //添加谷歌marker和label
        //var markergps = new BMap.Marker(gpsPoint);
        //map.addOverlay(markergps); //添加GPS标注
        //var labelgps = new BMap.Label("我是GPS标注哦", { offset: new BMap.Size(20, -10) });
        //markergps.setLabel(labelgps); //添加GPS标注

        
    </script>
</body>
</html>